/*! build date  2013-06-05 */
/*!
 * cuSel -- stylized replacement for standard select
 * 
 * https://github.com/fetis/cusel
 *   
 * @version 3.0 alpha
 *
 * @requires jQuery 1.7+     
 * @requires jScrollPane.js
 * @requires jquery.mousewheel.js
 * 
 * Originally based on cuSel 2.5 by Evgeniy Ryzhkov, Alexey Choporov & Roman Omelkovitch
 *  
 */
function cuSel(a){function b(){var a=e();$("html").off("click.cusel"),$("html").on("click.cusel",function(b){var d=jQuery(b.target);if(d.attr("id"),d.prop("class"),!d.hasClass("cuselText")&&!d.hasClass("cuselFrameRight")||d.parent().hasClass("classDisCusel"))if(d.hasClass("cusel")&&!d.hasClass("classDisCusel")&&d.is("div")){var e=d.find(".cusel-scroll-wrap").eq(0);c(e)}else if(d.is(".cusel-scroll-wrap span")&&!d.hasClass("cuselActive")){var f=d.attr("val")||d.text(),g=$(a.data("cusel-select")),h=d.index();if(!g.length)return;g.removeClass("cuselOpen").find(".cuselActive").removeClass("cuselActive").end().find(".cusel-scroll-wrap span").eq(h).addClass("cuselActive"),g.find(".cuselText").text(d.text()).end().find("input").val(f).change(),a.hide(),g.focus()}else{if(d.parents(".cusel-scroll-wrap").is("div"))return;a.is(":visible")&&(a.hide(),$(".cuselOpen").removeClass("cuselOpen"))}else{var e=d.parent().find(".cusel-scroll-wrap").eq(0);c(e)}}),$(".cusel").off("keydown.cusel"),$(".cusel").on("keydown.cusel",function(a){var b;if(window.event?b=window.event.keyCode:a&&(b=a.which),null==b||0==b||9==b)return!0;if(-1!=jQuery(this).prop("class").indexOf("classDisCusel"))return!1;if(40==b){var e=jQuery(this).find(".cuselOptHover").eq(0);if(e.is("span"))var f=e;else var f=jQuery(this).find(".cuselActive").eq(0);var g=f.next();return g.is("span")?(jQuery(this).find(".cuselText").eq(0).text(g.text()),f.removeClass("cuselOptHover"),g.addClass("cuselOptHover"),$(this).find("input").eq(0).val(g.attr("val")),d($(this).find(".cusel-scroll-wrap").eq(0)),!1):!1}if(38==b){var e=$(this).find(".cuselOptHover").eq(0);if(e.is("span"))var f=e;else var f=$(this).find(".cuselActive").eq(0);return cuselActivePrev=f.prev(),cuselActivePrev.is("span")?($(this).find(".cuselText").eq(0).text(cuselActivePrev.text()),f.removeClass("cuselOptHover"),cuselActivePrev.addClass("cuselOptHover"),$(this).find("input").eq(0).val(cuselActivePrev.attr("val")),d($(this).find(".cusel-scroll-wrap").eq(0)),!1):!1}if(27==b){var h=$(this).find(".cuselActive").eq(0).text();$(this).removeClass("cuselOpen").find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover"),$(this).find(".cuselText").eq(0).text(h)}if(13==b){var i=$(this).find(".cuselOptHover").eq(0);i.is("span")?($(this).find(".cuselActive").removeClass("cuselActive"),i.addClass("cuselActive")):$(this).find(".cuselActive").attr("val"),$(this).removeClass("cuselOpen").find(".cusel-scroll-wrap").eq(0).css("display","none").end().find(".cuselOptHover").eq(0).removeClass("cuselOptHover"),$(this).find("input").eq(0).change()}if(32==b&&$.browser.opera){var j=$(this).find(".cusel-scroll-wrap").eq(0);c(j)}return $.browser.opera?!1:void 0});var b=[];jQuery(".cusel").keypress(function(a){function c(){var a=[];for(var c in b)window.event?a[c]=b[c].keyCode:b[c]&&(a[c]=b[c].which),a[c]=String.fromCharCode(a[c]).toUpperCase();var e,g,h=jQuery(f).find("span"),i=h.length;for(e=0;i>e;e++){var j=!0;for(var k in b)g=h.eq(e).text().charAt(k).toUpperCase(),g!=a[k]&&(j=!1);if(j){jQuery(f).find(".cuselOptHover").removeClass("cuselOptHover").end().find("span").eq(e).addClass("cuselOptHover").end().end().find(".cuselText").eq(0).text(h.eq(e).text()),d($(f).find(".cusel-scroll-wrap").eq(0)),b=b.splice,b=[];break}}b=b.splice,b=[]}var e;if(window.event?e=window.event.keyCode:a&&(e=a.which),null==e||0==e||9==e)return!0;if(-1!=jQuery(this).prop("class").indexOf("classDisCusel"))return!1;var f=this;b.push(a),clearTimeout(jQuery.data(this,"timer"));var g=setTimeout(function(){c()},500);return jQuery(this).data("timer",g),jQuery.browser.opera&&9!=window.event.keyCode?!1:void 0})}function c(a){var b=a.parent(".cusel"),c=e();if(c.is(":hidden")){if(c.empty(),a.clone(!0).appendTo(c).show(),c.show().data("cusel-select",b[0]),jQuery.ui)c.position({my:"left top",at:"left bottom",of:b});else{var f=b.offset();c.offset({left:f.left,top:f.top+b.outerHeight()})}c.css("min-width",b.outerWidth()+"px"),b.addClass("cuselOpen");var g=b.hasClass("cuselScrollArrows");c.find(".cusel-scroll-pane").jScrollPaneCusel({showArrows:g}),d(c.find(".cusel-scroll-wrap"))}else c.hide().removeData("cusel-select"),b.removeClass("cuselOpen")}function d(a){var b=a.find(".cuselOptHover:first");if(b.length||(b=a.find(".cuselActive:first")),a.find(".jScrollPaneTrack:first").length&&b.length){var c=b.position();a.find(".cusel-scroll-pane:first")[0].id,a.find(".cusel-scroll-pane")[0].scrollTo(c.top)}}function e(){var a=$("#cuselBox");return a.length||(a=$('<div id="cuselBox">').hide().appendTo("body")),a}jQuery(a.changedEl).each(function(c){var d=jQuery(this),e=d.outerWidth(),f=d.prop("class"),g=this.id?this.id:"cuSel-"+c,h=d.prop("name"),j=d.val(),k=d.find("option[value='"+j+"']").eq(0),l=k.text(),m=d.prop("disabled"),n=a.scrollArrows,o=d.prop("onchange"),p=d.prop("tabindex"),q=d.prop("multiple");if(!g||q)return!1;m?(classDisCuselText="classDisCuselLabel",classDisCusel="classDisCusel"):(classDisCuselText="",classDisCusel=""),n&&(classDisCusel+=" cuselScrollArrows"),k.addClass("cuselActive");var r=d.html(),s=r.replace(/option/gi,"span").replace(/value=/gi,"val=");if($.browser.msie&&parseInt($.browser.version)<9){var t=/(val=)(.*?)(>)/g;s=s.replace(t,"$1'$2'$3")}var u='<div class="cusel '+f+" "+classDisCusel+'"'+" id=cuselFrame-"+g+' style="width:'+e+'px"'+' tabindex="'+p+'"'+">"+'<div class="cuselFrameRight"></div>'+'<div class="cuselText">'+l+"</div>"+'<div class="cusel-scroll-wrap"><div class="cusel-scroll-pane" id="cusel-scroll-'+g+'">'+s+"</div></div>"+'<input type="hidden" id="'+g+'" name="'+h+'" value="'+j+'" />'+"</div>";d.replaceWith(u),o&&jQuery("#"+g).bind("change",o);var v,w=jQuery("#cuselFrame-"+g),x=w.find("span");x.eq(0).text()?v=x.eq(0).innerHeight():(v=x.eq(1).innerHeight(),x.eq(0).css("height",x.eq(1).height())),x.length>a.visRows?w.find(".cusel-scroll-wrap").eq(0).css({height:v*a.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",v*a.visRows+"px"):w.find(".cusel-scroll-wrap").eq(0).css({display:"none",visibility:"visible"});var y=jQuery("#cusel-scroll-"+g).find("span[addTags]"),z=y.length;for(i=0;z>i;i++)y.eq(i).append(y.eq(i).attr("addTags")).removeAttr("addTags");b()})}function cuSelRefresh(a){var b,c=a.refreshEl.split(","),d=c.length;for(b=0;d>b;b++){var e=jQuery(c[b]).parents(".cusel").find(".cusel-scroll-wrap").eq(0);e.find(".cusel-scroll-pane").jScrollPaneRemoveCusel(),e.css({visibility:"hidden",display:"block"});var f=e.find("span"),g=f.eq(0).outerHeight();f.length>a.visRows?e.css({height:g*a.visRows+"px",display:"none",visibility:"visible"}).children(".cusel-scroll-pane").css("height",g*a.visRows+"px"):e.css({display:"none",visibility:"visible"})}}!function(a){a.jScrollPaneCusel={active:[]},a.fn.jScrollPaneCusel=function(b){b=a.extend({},a.fn.jScrollPaneCusel.defaults,b);var c=function(){return!1};return this.each(function(){function d(){var a=(_-K)/b.animateStep;a>1||-1>a?R(K+a):(R(_),bb())}var e=a(this),f=this.parentNode.offsetWidth;e.css("overflow","hidden");var g=this;if(a(this).parent().is(".jScrollPaneContainer")){var h=b.maintainPosition?e.position().top:0,i=a(this).parent(),j=f,k=i.outerHeight(),l=k;a(">.jScrollPaneTrack, >.jScrollArrowUp, >.jScrollArrowDown",i).remove(),e.css({top:0})}else{var h=0;this.originalPadding=e.css("paddingTop")+" "+e.css("paddingRight")+" "+e.css("paddingBottom")+" "+e.css("paddingLeft"),this.originalSidePaddingTotal=(parseInt(e.css("paddingLeft"))||0)+(parseInt(e.css("paddingRight"))||0);var j=f,k=e.innerHeight(),l=k;if(e.wrap("<div class='jScrollPaneContainer'></div>").parent().css({height:k+"px",width:j+"px"}),!window.navigator.userProfile){var m=parseInt(a(this).parent().css("border-left-width"))+parseInt(a(this).parent().css("border-right-width"));j-=m,a(this).css("width",j+"px").parent().css("width",j+"px")}a(document).bind("emchange",function(){e.jScrollPaneCusel(b)})}if(b.reinitialiseOnImageLoad){var n=a.data(g,"jScrollPaneImagesToLoad")||a("img",e),o=[];n.length&&n.each(function(c,d){a(this).bind("load",function(){-1==a.inArray(c,o)&&(o.push(d),n=a.grep(n,function(a){return a!=d}),a.data(g,"jScrollPaneImagesToLoad",n),b.reinitialiseOnImageLoad=!1,e.jScrollPaneCusel(b))}).each(function(){(this.complete||void 0===this.complete)&&(this.src=this.src)})})}var p=this.originalSidePaddingTotal,q={height:"auto",width:j-b.scrollbarWidth-b.scrollbarMargin-p+"px"};b.scrollbarOnLeft?q.paddingLeft=b.scrollbarMargin+b.scrollbarWidth+"px":q.paddingRight=b.scrollbarMargin+"px",e.css(q);var r=e.outerHeight(),s=k/r;if(.99>s){var t=e.parent();t.append(a('<div class="jScrollPaneTrack"></div>').css({width:b.scrollbarWidth+"px"}).append(a('<div class="jScrollPaneDrag"></div>').css({width:b.scrollbarWidth+"px"}).append(a('<div class="jScrollPaneDragTop"></div>').css({width:b.scrollbarWidth+"px"}),a('<div class="jScrollPaneDragBottom"></div>').css({width:b.scrollbarWidth+"px"}))));var u=a(">.jScrollPaneTrack",t),v=a(">.jScrollPaneTrack .jScrollPaneDrag",t);if(b.showArrows){var w,x,y,z,A=function(){(z>4||0==z%4)&&R(K+x*I),z++},B=function(){a("html").unbind("mouseup",B),w.removeClass("jScrollActiveArrowButton"),clearInterval(y)},C=function(){a("html").bind("mouseup",B),w.addClass("jScrollActiveArrowButton"),z=0,A(),y=setInterval(A,100)};t.append(a("<div></div>").attr({"class":"jScrollArrowUp"}).css({width:b.scrollbarWidth+"px"}).bind("mousedown",function(){return w=a(this),x=-1,C(),this.blur(),!1}).bind("click",c),a("<div></div>").attr({"class":"jScrollArrowDown"}).css({width:b.scrollbarWidth+"px"}).bind("mousedown",function(){return w=a(this),x=1,C(),this.blur(),!1}).bind("click",c));var D=a(">.jScrollArrowUp",t),E=a(">.jScrollArrowDown",t);if(b.arrowSize)l=k-b.arrowSize-b.arrowSize,u.css({height:l+"px",top:b.arrowSize+"px"});else{var F=D.height();b.arrowSize=F,l=k-F-E.height(),u.css({height:l+"px",top:F+"px"})}}var G,H,I,J=a(this).css({position:"absolute",overflow:"visible"}),K=0,L=s*k/2,M=function(a,b){var c="X"==b?"Left":"Top";return a["page"+b]||a["client"+b]+(document.documentElement["scroll"+c]||document.body["scroll"+c])||0},N=function(){return!1},O=function(){bb(),G=v.offset(),G.top-=K,H=l-v[0].offsetHeight,I=2*b.wheelSpeed*H/r},P=function(b){return O(),L=M(b,"Y")-K-G.top,a("html").bind("mouseup",Q).bind("mousemove",S),a.browser.msie&&a("html").bind("dragstart",N).bind("selectstart",N),!1},Q=function(){a("html").unbind("mouseup",Q).unbind("mousemove",S),L=s*k/2,a.browser.msie&&a("html").unbind("dragstart",N).unbind("selectstart",N)},R=function(a){a=0>a?0:a>H?H:a,K=a,v.css({top:a+"px"});var c=a/H;J.css({top:(k-r)*c+"px"}),e.trigger("scroll"),b.showArrows&&(D[0==a?"addClass":"removeClass"]("disabled"),E[a==H?"addClass":"removeClass"]("disabled"))},S=function(a){R(M(a,"Y")-G.top-L)},T=Math.max(Math.min(s*(k-2*b.arrowSize),b.dragMaxHeight),b.dragMinHeight);v.css({height:T+"px"}).bind("mousedown",P);var U,V,W,X=function(){(V>8||0==V%4)&&R(K-(K-W)/2),V++},Y=function(){clearInterval(U),a("html").unbind("mouseup",Y).unbind("mousemove",Z)},Z=function(a){W=M(a,"Y")-G.top-L},$=function(b){O(),Z(b),V=0,a("html").bind("mouseup",Y).bind("mousemove",Z),U=setInterval(X,100),X()};u.bind("mousedown",$),t.bind("mousewheel",function(a,b){return O(),bb(),R(K-b*I),!1});var _,ab,bb=function(){ab&&(clearInterval(ab),delete _)},cb=function(c,f){if("string"==typeof c){if($e=a(c,e),!$e.length)return;c=$e.offset().top-e.offset().top}t.scrollTop(0),bb();var g=-c/(k-r)*H;f||!b.animateTo?R(g):(_=g,ab=setInterval(d,b.animateInterval))};e[0].scrollTo=cb,e[0].scrollBy=function(a){var b=-parseInt(J.css("top"))||0;cb(b+a)},O(),cb(-h,!0),a("*",this).bind("focus",function(){for(var c=a(this),d=0;c[0]!=e[0];)d+=c.position().top,c=c.offsetParent();var f=-parseInt(J.css("top"))||0,g=f+k,h=d>f&&g>d;if(!h){var i=d-b.scrollbarMargin;d>f&&(i+=a(this).height()+15+b.scrollbarMargin-k),cb(i)}}),location.hash&&cb(location.hash),a(document).bind("click",function(b){if($target=a(b.target),$target.is("a")){var c=$target.attr("href");"#"==c.substr(0,1)&&cb(c)}}),a.jScrollPaneCusel.active.push(e[0])}else e.css({height:k+"px",width:j-this.originalSidePaddingTotal+"px",padding:this.originalPadding}),e.parent().unbind("mousewheel")})},a.fn.jScrollPaneRemoveCusel=function(){a(this).each(function(){$this=a(this);var b=$this.parent();b.is(".jScrollPaneContainer")&&($this.css({top:"",height:"",width:"",padding:"",overflow:"",position:""}),$this.attr("style",$this.data("originalStyleTag")),b.after($this).remove())})},a.fn.jScrollPaneCusel.defaults={scrollbarWidth:10,scrollbarMargin:5,wheelSpeed:18,showArrows:!1,arrowSize:0,animateTo:!1,dragMinHeight:1,dragMaxHeight:99999,animateInterval:100,animateStep:3,maintainPosition:!0,scrollbarOnLeft:!1,reinitialiseOnImageLoad:!1},a(window).bind("unload",function(){for(var b=a.jScrollPaneCusel.active,c=0;c<b.length;c++)b[c].scrollTo=b[c].scrollBy=null})}(jQuery),/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
function(a){function b(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=0,g=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),g=e,void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(g=0,f=-1*e),void 0!==c.wheelDeltaY&&(g=c.wheelDeltaY/120),void 0!==c.wheelDeltaX&&(f=-1*c.wheelDeltaX/120),d.unshift(b,e,f,g),(a.event.dispatch||a.event.handle).apply(this,d)}var c=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var d=c.length;d;)a.event.fixHooks[c[--d]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery);